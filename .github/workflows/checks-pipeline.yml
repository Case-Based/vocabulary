name: Checks for python project
on: [commit, pull-request]
jobs:
  runs-on: ubuntu-latest
  steps:
    - name: Checkout branch
      uses: actions/checkout@v4
    - name: Setup python
      uses: actions/setup-python@v5
      with:
        python-version: 3.12
    - name: Install dependencies with Poetry
      run: |
        curl -sSL https://install.python-poetry.org | python3 -
        poetry install
    - name: Install pre-commit
      run: poetry install pre-commit
    - name: Check code
      run: make check
    - name: Run tests
      run: make test
    - name: Build project
      run: make build